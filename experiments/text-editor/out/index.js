(()=>{var C=class extends Array{},N="function";function v(e){return e instanceof C}var p=(e,t,...n)=>{let r=n.reduce((o,i)=>(Array.isArray(i)&&!v(i)?o.push(...i):o.push(i),o),[]);return new C(e,t||{},r)},R=(e,t="__r")=>{if(!v(e))return e;let[n,r,o]=e;r.key=r.key||t;let i=o.map((l,d)=>R(l,t+"c"+(l?.[1]?.key||d)));if(typeof n===N){let l=n({...r,children:i});return R(l,t+"e"+(l?.key||""))}return new C(n,r,i)},q=(e,t)=>{let[,n]=e._hic||[];return Object.entries(t).forEach(([r,o])=>{if(n&&typeof n[r]===N&&e.removeEventListener(r,n[r]),typeof o===N)e.addEventListener(r.toLowerCase(),o);else{if(r==="value"||r==="disabled"){e[r]=o;return}let i=e;i.getAttribute(r)!==o&&i.setAttribute(r,o)}}),e},Z=(e,t)=>{for(let n=t.length-1;n>=0;n--){let r=t[n],o=t[n+1]||null,i=r.nextSibling;(o!==i||!e.contains(r))&&e?.insertBefore(r,o)}for(;e.childNodes.length>t.length;)e?.removeChild(e.childNodes[0]);return e},w=(e,t)=>{let n=t;if(!e&&e!=="")return null;if(!v(e))return t?.nodeType!==3?document.createTextNode(e):(t.textContent!==e&&(t.textContent=e),t);let[r,o]=t?._hic||[],[i,l]=e;if(r!==i||!n){let f=l.xmlns||(i==="svg"?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml");n=document.createElementNS(f,i)}q(n,l),n._hic=e;let O=(v(e)?e[2]:[]).filter(f=>f).map((f,a)=>{let g=t?.childNodes[a];return w(f,g)});return Z(n,O),t!==n&&t?.parentNode?.replaceChild(n,t),typeof l.ref===N&&l.ref!==o?.ref&&l.ref(n,l.key),n};var b=e=>t=>{let n={},r={},o={},i={},l=(d,O)=>{let f={key:d,...O};return Object.keys(e).forEach(a=>{f[a]=n[d][a],f["set"+a[0].toUpperCase()+a.slice(1)]=o[d][a]}),f};return({key:d,_setPostRender:O,...f})=>{let a=c=>{r[d]=c,c&&w(i[d],c)};n[d]||(n[d]={},o[d]={},Object.entries(e).map(([c,W])=>{n[d][c]=W,o[d][c]=Y=>{n[d][c]=Y;let I=l(d,f),K=R(p(t,{ref:a,...I}),d+"e"),y=r[d];i[d]=K,y&&w(K,y)}}));let g=l(d,f);return p(t,{ref:a,...g})}};var _=(...e)=>{let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)t=e[n](t);return t};var A=class{tokens=[];raw="";idx=0;constructor(t){this.raw=t}isAtEnd(){return this.idx>=this.raw.length}},M=e=>e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9",$=e=>e>="0"&&e<="9",Q=e=>e===`
`||e===" "||e==="	",k=e=>t=>{let n=t.idx;for(;!e(t);){if(t.isAtEnd())return t.idx=n,null;t.idx++}let r=t.idx;return t.idx=n,{start:n,end:r}},ee=()=>e=>e.isAtEnd()?{start:e.idx,end:e.idx}:null,D=e=>t=>{let n=t.idx,r=n;for(;e(t.raw[r])&&t.raw[r]!==void 0;)r++;if(r>n)return{start:n,end:r}},x=e=>t=>e(t)||{start:t.idx,end:t.idx},te=D(M),P=D($),S=e=>t=>{if(e(t.raw[t.idx]))return{start:t.idx,end:t.idx+1}},pe=S(Q),E=e=>S(t=>t===e),B=S(e=>!M(e)),T=e=>{let t=[];for(let n=0;n<e.length;n++)t.push(E(e[n]));return m(...t)},m=(...e)=>t=>{let n=t.idx,r=0;for(let o=0;o<e.length;o++){let i=e[o](t);if(!i)return t.idx=n,null;t.idx+=i.end-i.start,r+=i.end-i.start}return t.idx=n,{start:t.idx,end:t.idx+r}},L=e=>t=>{let n=t.idx,r=e(t);if(r)return t.idx+=r.end-r.start,{start:n,end:n}},s=(e,t)=>n=>{let r=e(n);if(r)return r.type=t,r.parser=e,n.tokens.push(r),n.idx=r.end,r},j=e=>t=>{for(;t.raw[t.idx]!==void 0;)e(t)},h=(...e)=>t=>{for(let n=0;n<e.length;n++){let r=e[n](t);if(r)return r}},H=e=>t=>{let n=e(t);if(n)return{...n,end:n.start}},ne=(e,t=1)=>n=>{let r=n.idx;if(n.idx=n.idx-t,!e(n)){n.idx=r;return}return n.idx=r,{start:r,end:r}},U=()=>e=>({start:e.idx,end:e.idx+1}),F=m(te,H(E("("))),V=h(m(T("//"),x(D(e=>e!==`
`))),m(T("/*"),k(h(T("*/"),ee())),x(T("*/")))),z=h(m(E('"'),x(D(e=>e!=='"')),E('"')),m(E("'"),x(D(e=>e!=="'")),E("'"))),re=m(P,x(E(".")),x(P)),se=e=>e.idx===0?{start:0,end:0}:null,oe=e=>e.idx===e.raw.length?{start:e.idx,end:e.idx}:null,u=e=>m(h(se,ne(B)),T(e),H(h(oe,B))),ge=j(h(s(F,"FUNC_CALL"),s(V,"COMMENT"),s(z,"STRING"),s(u("void"),"KEYWORD"),s(u("return"),"KEYWORD"),s(u("int"),"KEYWORD"),s(u("double"),"KEYWORD"),s(u("struct"),"KEYWORD"),s(u("typedef"),"KEYWORD"),L(U()))),G=j(h(s(F,"FUNC_CALL"),s(V,"COMMENT"),s(z,"STRING"),s(re,"NUMBER"),s(u("function"),"KEYWORD"),s(u("const"),"KEYWORD_CONST"),s(u("export"),"KEYWORD"),s(u("class"),"KEYWORD"),s(u("return"),"KEYWORD"),s(u("null"),"KEYWORD"),s(u("undefined"),"KEYWORD"),s(u("if"),"KEYWORD"),s(u("while"),"KEYWORD"),s(u("let"),"KEYWORD"),s(u("import"),"KEYWORD"),s(u("from"),"KEYWORD"),s(u("object"),"KEYWORD"),s(u("as"),"KEYWORD"),s(u("else"),"KEYWORD"),s(u("typeof"),"KEYWORD"),L(U())));var J=`// EDIT ME!

import { fire, getRotation, getXVel, getYVel } from "game.js";

// Call this function once per game tick.
// The contents of this function are non-sensical, but should
// get the idea across.
tick(() => {
  if (getXVel() > 10.0 && getYVel() > 10.0) {
    fire();
  }
});`;var ae=_(b({width:0,textareaRef:{value:null},preRef:{value:null}}),({value:e,onChange:t,textareaRef:n,preRef:r,ref:o})=>{let i=()=>{let a=new A(e);return parseResult=G(a),a.tokens.length===0?[e]:a.tokens.reduce((g,c,W,Y)=>{let K=Y[W-1]?.end||0;c.start>K&&g.push(e.slice(K,c.start));let y=`parsed_${c.type}`,X=e.slice(c.start,c.end);return g.push(p("span",{class:y},X)),W===Y.length-1&&g.push(e.slice(c.end)),g},[])},l=()=>{let a=n.value;a&&(a.style.height=r.value.scrollHeight+20)},d=a=>{t(a),l()};return p("div",{ref:o,class:"editor_container"},p("textarea",{ref:a=>{n.value=a},class:"editor_textarea",value:e,input:a=>d(a.target.value)}),p("pre",{ref:a=>{r.value=a},class:"editor_draw"},p("code",null,i())))}),de=_(b({editorContent:J}),({editorContent:e,setEditorContent:t,ref:n})=>p("div",{ref:n},p(ae,{onChange:t,value:e}))),ue=document.getElementById("demo");w(R(p(de,null)),ue);})();
