(()=>{var K=class extends Array{},Y="function";function y(t){return t instanceof K}var p=(t,e,...n)=>{let r=n.reduce((o,i)=>(Array.isArray(i)&&!y(i)?o.push(...i):o.push(i),o),[]);return new K(t,e||{},r)},w=(t,e="__r")=>{if(!y(t))return t;let[n,r,o]=t;r.key=r.key||e;let i=o.map((l,d)=>w(l,e+"c"+(l?.[1]?.key||d)));if(typeof n===Y){let l=n({...r,children:i});return w(l,e+"e"+(l?.key||""))}return new K(n,r,i)},X=(t,e)=>{let[,n]=t._hic||[];return Object.entries(e).forEach(([r,o])=>{if(n&&typeof n[r]===Y&&t.removeEventListener(r,n[r]),typeof o===Y)t.addEventListener(r.toLowerCase(),o);else{if(r==="value"||r==="disabled"){t[r]=o;return}let i=t;i.getAttribute(r)!==o&&i.setAttribute(r,o)}}),t},q=(t,e)=>{for(let n=e.length-1;n>=0;n--){let r=e[n],o=e[n+1]||null,i=r.nextSibling;(o!==i||!t.contains(r))&&t?.insertBefore(r,o)}for(;t.childNodes.length>e.length;)t?.removeChild(t.childNodes[0]);return t},x=(t,e)=>{let n=e;if(!t&&t!=="")return null;if(!y(t))return e?.nodeType!==3?document.createTextNode(t):(e.textContent!==t&&(e.textContent=t),e);let[r,o]=e?._hic||[],[i,l]=t;if(r!==i||!n){let c=l.xmlns||(i==="svg"?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml");n=document.createElementNS(c,i)}X(n,l),n._hic=t;let u=(y(t)?t[2]:[]).filter(c=>c).map((c,f)=>{let R=e?.childNodes[f];return x(c,R)});return q(n,u),e!==n&&e?.parentNode?.replaceChild(n,e),typeof l.ref===Y&&l.ref!==o?.ref&&l.ref(n,l.key),n};var b=t=>e=>{let n={},r={},o={},i={},l=(d,u)=>{let c={key:d,...u};return Object.keys(t).forEach(f=>{c[f]=n[d][f],c["set"+f[0].toUpperCase()+f.slice(1)]=o[d][f]}),c};return({key:d,_setPostRender:u,...c})=>{let f=g=>{r[d]=g,g&&x(i[d],g)};n[d]||(n[d]={},o[d]={},Object.entries(t).map(([g,S])=>{n[d][g]=S,o[d][g]=T=>{n[d][g]=T;let A=l(d,c),W=w(p(e,{ref:f,...A}),d+"e"),I=r[d];i[d]=W,I&&x(W,I)}}));let R=l(d,c);return p(e,{ref:f,...R})}};var _=(...t)=>{let e=t[t.length-1];for(let n=t.length-2;n>=0;n--)e=t[n](e);return e};var N=class{tokens=[];raw="";idx=0;constructor(e){this.raw=e}isAtEnd(){return this.idx>=this.raw.length}},P=t=>t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9",Z=t=>t>="0"&&t<="9",$=t=>t===`
`||t===" "||t==="	",Q=t=>e=>{let n=e.idx;for(;!t(e);){if(e.isAtEnd())return e.idx=n,null;e.idx++}let r=e.idx;return e.idx=n,{start:n,end:r}},k=()=>t=>t.isAtEnd()?{start:t.idx,end:t.idx}:null,D=t=>e=>{let n=e.idx,r=n;for(;t(e.raw[r])&&e.raw[r]!==void 0;)r++;if(r>n)return{start:n,end:r}},O=t=>e=>t(e)||{start:e.idx,end:e.idx},tt=D(P),B=D(Z),v=t=>e=>{if(t(e.raw[e.idx]))return{start:e.idx,end:e.idx+1}},ft=v($),E=t=>v(e=>e===t),M=v(t=>!P(t)),C=t=>{let e=[];for(let n=0;n<t.length;n++)e.push(E(t[n]));return m(...e)},m=(...t)=>e=>{let n=e.idx,r=0;for(let o=0;o<t.length;o++){let i=t[o](e);if(!i)return e.idx=n,null;e.idx+=i.end-i.start,r+=i.end-i.start}return e.idx=n,{start:e.idx,end:e.idx+r}},L=t=>e=>{let n=e.idx,r=t(e);if(r)return e.idx+=r.end-r.start,{start:n,end:n}},s=(t,e)=>n=>{let r=t(n);if(r)return r.type=e,r.parser=t,n.tokens.push(r),n.idx=r.end,r},j=t=>e=>{for(;e.raw[e.idx]!==void 0;)t(e)},h=(...t)=>e=>{for(let n=0;n<t.length;n++){let r=t[n](e);if(r)return r}},H=t=>e=>{let n=t(e);if(n)return{...n,end:n.start}},et=(t,e=1)=>n=>{let r=n.idx;if(n.idx=n.idx-e,!t(n)){n.idx=r;return}return n.idx=r,{start:r,end:r}},U=()=>t=>({start:t.idx,end:t.idx+1}),F=m(tt,H(E("("))),V=h(m(C("//"),O(D(t=>t!==`
`))),m(C("/*"),Q(h(C("*/"),k())),O(C("*/")))),z=h(m(E('"'),O(D(t=>t!=='"')),E('"')),m(E("'"),O(D(t=>t!=="'")),E("'"))),nt=m(B,O(E(".")),O(B)),rt=t=>t.idx===0?{start:0,end:0}:null,st=t=>t.idx===t.raw.length?{start:t.idx,end:t.idx}:null,a=t=>m(h(rt,et(M)),C(t),H(h(st,M))),pt=j(h(s(F,"FUNC_CALL"),s(V,"COMMENT"),s(z,"STRING"),s(a("void"),"KEYWORD"),s(a("return"),"KEYWORD"),s(a("int"),"KEYWORD"),s(a("double"),"KEYWORD"),s(a("struct"),"KEYWORD"),s(a("typedef"),"KEYWORD"),L(U()))),G=j(h(s(F,"FUNC_CALL"),s(V,"COMMENT"),s(z,"STRING"),s(nt,"NUMBER"),s(a("function"),"KEYWORD"),s(a("const"),"KEYWORD_CONST"),s(a("export"),"KEYWORD"),s(a("class"),"KEYWORD"),s(a("return"),"KEYWORD"),s(a("null"),"KEYWORD"),s(a("undefined"),"KEYWORD"),s(a("if"),"KEYWORD"),s(a("while"),"KEYWORD"),s(a("let"),"KEYWORD"),s(a("import"),"KEYWORD"),s(a("from"),"KEYWORD"),s(a("object"),"KEYWORD"),s(a("as"),"KEYWORD"),s(a("else"),"KEYWORD"),s(a("typeof"),"KEYWORD"),L(U())));var J=`// EDIT ME!

import { fire, getRotation, getXVel, getYVel } from "game.js";

// Call this function once per game tick.
// The contents of this function are non-sensical, but should
// get the idea across.
tick(() => {
  if (getXVel() > 10.0 && getYVel() > 10.0) {
    fire();
  }
});`;var it=_(b({width:0,textareaRef:{value:null}}),({value:t,onChange:e,textareaRef:n,ref:r})=>{let o=()=>{let u=new N(t);return parseResult=G(u),u.tokens.length===0?[t]:u.tokens.reduce((c,f,R,g)=>{let T=g[R-1]?.end||0;f.start>T&&c.push(t.slice(T,f.start));let A=`parsed_${f.type}`,W=t.slice(f.start,f.end);return c.push(p("span",{class:A},W)),R===g.length-1&&c.push(t.slice(f.end)),c},[])},i=()=>{let u=n.value;u&&(u.style.height=u.scrollHeight)},l=u=>{e(u),i()};return p("div",{ref:r,class:"editor_container"},p("textarea",{ref:u=>{n.value=u},class:"editor_textarea",value:t,input:u=>l(u.target.value)}),p("pre",{class:"editor_draw"},p("code",null,o())))}),at=_(b({editorContent:J}),({editorContent:t,setEditorContent:e,ref:n})=>p("div",{ref:n},p(it,{onChange:e,value:t}))),dt=document.getElementById("demo");x(w(p(at,null)),dt);})();
