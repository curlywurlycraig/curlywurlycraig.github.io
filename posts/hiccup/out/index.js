(()=>{var E=class extends Array{},y="function";function C(t){return t instanceof E}var c=(t,e,...n)=>{let r=n.reduce((s,o)=>(Array.isArray(o)&&!C(o)?s.push(...o):s.push(o),s),[]);return new E(t,e||{},r)},g=(t,e="__r")=>{if(!C(t))return t;let[n,r,s]=t;r.key=r.key||e;let o=s.map((d,i)=>g(d,e+"c"+(d?.[1]?.key||i)));if(typeof n===y){let d=n({...r,children:o});return g(d,e+"e"+(d?.key||""))}return new E(n,r,o)},j=(t,e)=>{let[,n]=t._hic||[];return Object.entries(e).forEach(([r,s])=>{if(n&&typeof n[r]===y&&t.removeEventListener(r,n[r]),typeof s===y)t.addEventListener(r.toLowerCase(),s);else{if(r==="value"||r==="disabled"){t[r]=s;return}let o=t;o.getAttribute(r)!==s&&o.setAttribute(r,s)}}),t},F=(t,e)=>{for(let n=e.length-1;n>=0;n--){let r=e[n],s=e[n+1]||null,o=r.nextSibling;(s!==o||!t.contains(r))&&t?.insertBefore(r,s)}for(;t.childNodes.length>e.length;)t?.removeChild(t.childNodes[0]);return t},m=(t,e)=>{let n=e;if(!t&&t!=="")return null;if(!C(t))return e?.nodeType!==3?document.createTextNode(t):(e.textContent!==t&&(e.textContent=t),e);let[r,s]=e?._hic||[],[o,d]=t;if(r!==o||!n){let a=d.xmlns||(o==="svg"?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml");n=document.createElementNS(a,o)}j(n,d),n._hic=t;let f=(C(t)?t[2]:[]).filter(a=>a).map((a,u)=>{let w=e?.childNodes[u];return m(a,w)});return F(n,f),e!==n&&e?.parentNode?.replaceChild(n,e),typeof d.ref===y&&d.ref!==s?.ref&&d.ref(n,d.key),n};var R=t=>e=>{let n={},r={},s={},o={},d=(i,f)=>{let a={key:i,...f};return Object.keys(t).forEach(u=>{a[u]=n[i][u],a["set"+u[0].toUpperCase()+u.slice(1)]=s[i][u]}),a};return({key:i,_setPostRender:f,...a})=>{let u=l=>{r[i]=l,l&&m(o[i],l)};n[i]||(n[i]={},s[i]={},Object.entries(t).map(([l,Y])=>{n[i][l]=Y,s[i][l]=H=>{n[i][l]=H;let M=d(i,a),O=g(c(e,{ref:u,...M}),i+"e"),K=r[i];o[i]=O,K&&m(O,K)}}));let w=d(i,a);return c(e,{ref:u,...w})}};var _=(...t)=>{let e=t[t.length-1];for(let n=t.length-2;n>=0;n--)e=t[n](e);return e};var N=class{tokens=[];raw="";idx=0;constructor(e){this.raw=e}},P=t=>t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9",U=t=>t===`
`||t===" "||t==="	",v=t=>e=>{let n=e.idx,r=n;for(;t(e.raw[r])&&e.raw[r]!==void 0;)r++;if(r>n)return{start:n,end:r}},B=t=>e=>t(e)||{start:e.idx,end:e.idx},q=()=>v(P),A=t=>e=>{if(t(e.raw[e.idx]))return{start:e.idx,end:e.idx+1}},dt=A(U),T=t=>A(e=>e===t),S=A(t=>!P(t)),I=t=>{let e=[];for(let n=0;n<t.length;n++)e.push(T(t[n]));return x(...e)},x=(...t)=>e=>{let n=e.idx,r=0;for(let s=0;s<t.length;s++){let o=t[s](e);if(!o)return e.idx=n,null;e.idx+=o.end-o.start,r+=o.end-o.start}return e.idx=n,{start:e.idx,end:e.idx+r}},z=t=>e=>{let n=e.idx,r=t(e);if(r)return e.idx+=r.end-r.start,{start:n,end:n}},p=(t,e)=>n=>{let r=t(n);if(r)return r.type=e,r.parser=t,n.tokens.push(r),n.idx=r.end,r},G=t=>e=>{for(;e.raw[e.idx]!==void 0;)t(e)},b=(...t)=>e=>{for(let n=0;n<t.length;n++){let r=t[n](e);if(r)return r}},W=t=>e=>{let n=t(e);if(n)return{...n,end:n.start}},Z=(t,e=1)=>n=>{let r=n.idx;if(n.idx=n.idx-e,!t(n)){n.idx=r;return}return n.idx=r,{start:r,end:r}},$=()=>t=>({start:t.idx,end:t.idx+1}),J=x(q(),W(T("("))),Q=x(I("//"),B(v(t=>t!==`
`))),V=x(T('"'),B(v(t=>t!=='"')),T('"')),X=t=>t.idx===0?{start:0,end:0}:null,k=t=>t.idx===t.raw.length?{start:t.idx,end:t.idx}:null,h=t=>x(b(X,Z(S)),I(t),W(b(k,S))),D=G(b(p(J,"FUNC_CALL"),p(Q,"COMMENT"),p(V,"STRING"),p(h("void"),"KEYWORD"),p(h("return"),"KEYWORD"),p(h("int"),"KEYWORD"),p(h("double"),"KEYWORD"),p(h("struct"),"KEYWORD"),p(h("typedef"),"KEYWORD"),z($())));var L=`void main() {
    return "hello world!"; // that doesn't make sense
}`;var et=_(R({width:0}),({value:t,onChange:e,ref:n})=>c("div",{ref:n,class:"editor_container"},c("textarea",{class:"editor_textarea",value:t,input:s=>e(s.target.value)}),c("pre",{class:"editor_draw"},c("code",null,(()=>{let s=new N(t);return parseResult=D(s),s.tokens.length===0?[t]:s.tokens.reduce((o,d,i,f)=>{let u=f[i-1]?.end||0;d.start>u&&o.push(t.slice(u,d.start));let w=`parsed_${d.type}`,l=t.slice(d.start,d.end);return o.push(c("span",{class:w},l)),i===f.length-1&&o.push(t.slice(d.end)),o},[])})())))),nt=_(R({editorContent:L}),({editorContent:t,setEditorContent:e,ref:n})=>c("div",{ref:n},c(et,{onChange:e,value:t}))),rt=document.getElementById("demo");m(g(c(nt,null)),rt);})();
